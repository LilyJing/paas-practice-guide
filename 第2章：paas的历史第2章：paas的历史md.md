## 由SaaS衍生出来的PaaS

如前一章所说，SaaS应用都是针对某一行业或者某一领域的某一个细分需求的。比如某个行业的CRM、IT领域中的代码托管等。这通常意味着这个市场是有“天花板”的，规模优势难以得到充分的发挥。SaaS应用模式中，用户的自定义需求通常很难得到满足，只能通过有限的软件配置手段。

要拓展到其他领域，或者通过生态链上的合作伙伴满足客户定制化需求怎么办？答案最早由Salesforce.com给出。在 Saleforces.com提供SaaS服务的基础上，2007年它推出了Force.com平台用来支持定制化的开发。这与另外一个提供私有化ERP和CRM的解决方案厂商SAP，授权它的合作伙伴在自己软件组件的基础上定制化是一个逻辑。用户可以通过 Apex语言和Visualforce可视化组件来开发应用。通过Force.com，一大波生态链的合作伙伴可以共同开发满足客户定制化的应用来支持更广泛的行业和更特别的需求。

最著名的代码托管网站github.com也是如此。通过生态链的合作伙伴，提供了代码审查、持续集成等一系列的扩展功能。**成功的SaaS服务最终都会走到这一步来拓展自己的市场空间**。

这种形式的PaaS通常会充分依托自己在SaaS领域的优势，因此拥有自己的语言或者API，并非开源或者开放的方案。

## App Engine们

如同AWS在IaaS中的地位一样，Google公司在2008年4月推出的Google App Engine（GAE）定义了PaaS 1.0的标准形式。Google公司希望通过GAE来拓展云计算的市场，与AWS进行竞争。但事实证明AWS的模式更优，所以后来Google在2013年又推出了自己IaaS服务Google Compute Engine（GCE）来追赶AWS。

与AWS不一样的是，GAE不提供给使用者访问操作系统的方式，也就是说使用者无法通过类似本地习惯了的方式部署应用，也无法对部署的应用进行调试。GAE提供了界面给开发者，让其上传代码，然后它会编译或解释这些代码，并运行起来。如果代码一切正常，这的确是非常棒的一种模式，但大部分的代码都需要经历一些调试才能正常运行起来，在云端调试比在本地调试困难得多。这是GAE最被使用者诟病的地方。当然，限制使用的语言、甚至限制语言的使用形式也是其被诟病的地方。

因为这些原因，GAE并没有成为应用开发者部署应用的首要选择，反而成了一个非常好的“应用市场”，市面上出现了很多有趣的、可以直接运行在GAE上的应用，使用者只要下载并简单配置，就可以通过GAE的免费配额运行起来。这给后续的PaaS服务提供商提供了一个很好的参考：有的情况下并不需要使用者自己写应用，通过应用市场运行别人的应用也是PaaS的一个适用场景。

在国内，有一家很早模仿Google做PaaS公有云的，那就是新浪，他们在2009年11月就推出了SAE的第一个版本。

## Heroku独辟蹊径

仅接着GAE，另一家被称为“纯云服务”的企业Heroku推出了自己的云服务——托管 Ruby 语言的Web程序。随后Heroku支持的语言扩大到了Java、Node.js、Scala、Clojure、Python、PHP和Go。

Herorku本身是托管在AWS之上的，它的主要贡献在于三点：提出了buildpack的概念；通过客户端的形式简化了应用部署；与git代码库结合探索了DevOps。Herorku还提出了“十二因子”的云计算程序开发原则，这后来成为云原生Cloud Native的核心思想。

Herorku是一家相当有自己技术特点的公司，在2010年被salesforce.com收购。

## Cloud Foundry开源的私有解决方案

VMWare是最早提供商业虚拟化软件的企业，其vsphere是最早的私有IaaS管理平台。因此他的PaaS解决方案当然也和其他不一样。在其私有IaaS管理平台大卖的基础上，2010年VMWare召集技术骨干开始秘密开发私有PaaS管理平台，这就是后来的Cloud Foundry，在其商业化影响力下，在国内Cloud Foundry基本成了PaaS的代名词。

非常棒的是，VMWare改变了其商业策略，在2011年3月将Cloud Foundry开源，很快就有IBM等重量级合作伙伴加入到开发的队伍中，使得其生态链快速完善。IBM推出的Bluemix公有云核心部分就是基于Cloud Foundry做的。VMWare后来资本运作出的公司Pivotal现在负责Cloud Foundry的维护，他也推出了自己的公有云服务Pivotal.io。

Cloud Foundry的开发由于聚集了大量VMWare以及其他大牌IT企业中的精英，其架构非常优秀。异步通信模式使其扩展性强。在容器技术尚未大火的时候就提出了自己的解决方案warden，离docker只有数步之差。

Cloud Foundry对国内PaaS业界的贡献不仅在于开源软件本身，许多Pivotal和IBM负责Cloud Foundry的开发人员都在国内，培养了不少人才。

## 由IaaS衍生出来的PaaS

本章的最开始讨论了由SaaS衍生到PaaS的必要性，其实从IaaS衍生到PaaS也是非常由必要的。首先IaaS的同质化很严重，因为IaaS无法是提供虚拟机、磁盘和网络而已；其次纯IaaS的增长型也是不够的，AWS上利润率最高的是其数据库服务，而不是虚拟机。

在这样的情况下AWS每年都推出数项服务，最重要的大概是其数据库服务RDS了。其后AWS又推出了 Beanstalk 作为其PaaS形式的服务。与GAE和Heroku不一样的是， Beanstalk 并非使用操作系统容器来实现多租户，仍旧是使用AWS的EC2虚拟机来实现，所以使用者不但可以部署自己的应用，还可以远程登录到部署了自己应用的虚拟机里面。这对应用的调试和调优给出了极大的便利。后来GCE也学习这一点，推出了自己的managed VM。

随着2016年PaaS的重新兴起，AWS抓住机会推出了自己的PaaS理念——Serverless，将多种原有的基础服务通过自己的Lamda语言连接起来，让用户不接触虚拟机就可以按需启动自己的应用。

同样微软的Azure，阿里云都从IaaS逐步往PaaS衍生，拓展自己的疆域。

